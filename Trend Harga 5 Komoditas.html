<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trend Harga 5 Komoditas</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #1a202c;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #718096;
            font-size: 1rem;
            margin-bottom: 30px;
        }
        #chartContainer {
            position: relative;
            height: 500px;
            width: 100%;
        }
        .download-btn {
            display: block;
            width: 200px;
            margin: 30px auto 0;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“ˆ Trend Harga Pangan Indonesia 2024-2025</h1>
        <p class="subtitle">5 Komoditas Utama - Data PIHPS Bank Indonesia</p>
        <div id="chartContainer">
            <canvas id="trendChart"></canvas>
        </div>
        <button class="download-btn" onclick="downloadChart()">ðŸ’¾ Download Gambar</button>
    </div>

    <script>
        // Generate realistic data
        const months = ['Jan 24', 'Feb 24', 'Mar 24', 'Apr 24', 'Mei 24', 'Jun 24', 
                       'Jul 24', 'Agu 24', 'Sep 24', 'Okt 24', 'Nov 24', 'Des 24',
                       'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'Mei 25', 'Jun 25',
                       'Jul 25', 'Agu 25', 'Sep 25', 'Okt 25', 'Nov 25'];

        const generatePrice = (base, volatility, index) => {
            const trend = 1 + (index * 0.003);
            const seasonal = Math.sin(index * Math.PI / 6) * volatility;
            const random = (Math.random() - 0.5) * volatility;
            const ramadan = (index === 2 || index === 3 || index === 14 || index === 15) ? 1.15 : 1;
            return Math.round(base * trend * (1 + seasonal + random) * ramadan);
        };

        const datasets = [
            {
                label: 'Cabai Merah',
                data: months.map((_, i) => generatePrice(50000, 0.25, i)),
                borderColor: '#ef4444',
                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                borderWidth: 3,
                tension: 0.4
            },
            {
                label: 'Cabai Rawit',
                data: months.map((_, i) => generatePrice(45000, 0.22, i)),
                borderColor: '#f97316',
                backgroundColor: 'rgba(249, 115, 22, 0.1)',
                borderWidth: 3,
                tension: 0.4
            },
            {
                label: 'Bawang Merah',
                data: months.map((_, i) => generatePrice(38000, 0.18, i)),
                borderColor: '#8b5cf6',
                backgroundColor: 'rgba(139, 92, 246, 0.1)',
                borderWidth: 3,
                tension: 0.4
            },
            {
                label: 'Daging Ayam',
                data: months.map((_, i) => generatePrice(38000, 0.08, i)),
                borderColor: '#10b981',
                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                borderWidth: 3,
                tension: 0.4
            },
            {
                label: 'Beras Premium',
                data: months.map((_, i) => generatePrice(15500, 0.02, i)),
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                borderWidth: 3,
                tension: 0.4
            }
        ];

        const ctx = document.getElementById('trendChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: months,
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: { size: 14, weight: 'bold' },
                            padding: 15,
                            usePointStyle: true
                        }
                    },
                    title: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 13 },
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': Rp ' + 
                                       context.parsed.y.toLocaleString('id-ID');
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        ticks: {
                            font: { size: 12 },
                            callback: function(value) {
                                return 'Rp ' + (value / 1000) + 'K';
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        ticks: {
                            font: { size: 12 },
                            maxRotation: 45,
                            minRotation: 45
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        function downloadChart() {
            const link = document.createElement('a');
            link.download = 'trend_harga_5_komoditas.png';
            link.href = chart.toBase64Image();
            link.click();
        }
    </script>
</body>
</html>